<div class="flex flex-col gap-2">
  <div class="flex flex-row items-center justify-between">
    @if (role) {
      <div class="text-title-large">{{ role.name }}</div>

      @if (role.isEditable) {
        <button
          matIconButton
          aria-label="Icon button with a delete icon"
          data-test="btn-delete"
          (click)="onDeleteClicked()">
          <mat-icon fontSet="material-symbols-outlined">delete</mat-icon>
        </button>
      }
    }
  </div>

  <mat-divider></mat-divider>
  <div class="text-title-medium">Access Controls</div>

  <app-server-side-table #table trackBy="accessControlId">
    <ng-template appDefaultTableMobileItemView let-data>
      <mat-card>
        <mat-card-content>
          <div class="row">
            <div style="flex: 1">
              <div>{{ data.name }}</div>
            </div>
            <div class="row main-axis-end" style="width: 50px">
              <ng-container
                *ngTemplateOutlet="
                  actionTemplate;
                  context: {
                    element: data,
                  }
                "></ng-container>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </ng-template>
  </app-server-side-table>
</div>

<ng-template #actionTemplate let-element="element">
  <mat-slide-toggle
    data-test="btn-slide"
    [checked]="element.id != undefined"
    (change)="onToggled(element)"
    [disabled]="role?.isEditable != true"></mat-slide-toggle>
</ng-template>
